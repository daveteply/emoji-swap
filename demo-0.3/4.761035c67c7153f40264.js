(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{ekgB:function(t,e,i){"use strict";i.r(e),i.d(e,"GameModule",function(){return bt});var a=i("ofXK"),n=i("tyNb"),r=i("fXoL"),o=i("FKr1"),s=i("R1ws"),l=i("u47x");const c=["mat-button",""],m=["*"],d=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class b{constructor(t){this._elementRef=t}}const u=Object(o.d)(Object(o.f)(Object(o.e)(b)));let h=(()=>{class t extends u{constructor(t,e,i){super(t),this._focusMonitor=e,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const a of d)this._hasHostAttributes(a)&&this._getHostElement().classList.add(a);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(l.a),r.Ib(s.a,8))},t.\u0275cmp=r.Cb({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&r.jc(o.b,!0),2&t){let t;r.ac(t=r.Tb())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(r.zb("disabled",e.disabled||null),r.Ab("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[r.vb],attrs:c,ngContentSelectors:m,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(r.Yb(),r.Lb(0,"span",0),r.Xb(1),r.Kb(),r.Jb(2,"span",1),r.Jb(3,"span",2)),2&t&&(r.yb(2),r.Ab("mat-button-ripple-round",e.isRoundButton||e.isIconButton),r.Zb("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[o.b],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),p=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[o.c,o.a],o.a]}),t})();var g=i("XNiG");let f=(()=>{class t{WithinGrid(t,e,i){var a,n;const r=null===(a=null==i?void 0:i.grid)||void 0===a?void 0:a.length,o=null===(n=null==i?void 0:i.grid[0])||void 0===n?void 0:n.length;return t>-1&&e>-1&&t<r&&e<o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=function(t){return t[t.Left=2]="Left",t[t.Right=4]="Right",t[t.Up=8]="Up",t[t.Down=16]="Down",t}({}),y=function(t){return t[t.LocateAdjacentTile=0]="LocateAdjacentTile",t[t.ApplyDirectionalAnimation=1]="ApplyDirectionalAnimation",t[t.Swap=2]="Swap",t[t.SwapBack=3]="SwapBack",t[t.Shutter=4]="Shutter",t[t.ShowHint=5]="ShowHint",t}({});let S=(()=>{class t{constructor(t){this.gameUtilityService=t,this.gameInteractionStateSource=new g.a,this.gameInteractionState$=this.gameInteractionStateSource.asObservable(),this.isSwapBack=!1}DoStep(t){this.gameInteractionStateSource.next(t)}TileSwiped(t){this.playerTile=t,this.adjacentTile={},this.gameInteractionStateSource.next(y.LocateAdjacentTile)}LocateAdjacentTile(t){let e=this.playerTile.tile.rowInx,i=this.playerTile.tile.colInx;if(1!==this.playerTile.direction){switch(this.playerTile.direction){case v.Up:e--;break;case v.Right:i++;break;case v.Down:e++;break;case v.Left:i--}if(this.gameUtilityService.WithinGrid(e,i,t))return this.adjacentTile=t.grid[e][i],!0}return t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx].animateShutter=!1,this.gameInteractionStateSource.next(y.Shutter),!1}SetDirectionalAnimationClass(t){switch(this.playerTile.direction){case v.Up:t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx].animateSlideUp=!0,t.grid[this.adjacentTile.rowInx][this.adjacentTile.colInx].animateSlideDown=!0;break;case v.Right:t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx].animateSlideRight=!0,t.grid[this.adjacentTile.rowInx][this.adjacentTile.colInx].animateSlideLeft=!0;break;case v.Down:t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx].animateSlideDown=!0,t.grid[this.adjacentTile.rowInx][this.adjacentTile.colInx].animateSlideUp=!0;break;case v.Left:t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx].animateSlideLeft=!0,t.grid[this.adjacentTile.rowInx][this.adjacentTile.colInx].animateSlideRight=!0}this.gameInteractionStateSource.next(y.Swap)}Swap(t){const e=Object.assign({},t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx]),i=Object.assign({},t.grid[this.adjacentTile.rowInx][this.adjacentTile.colInx]);t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx]=i,t.grid[this.adjacentTile.rowInx][this.adjacentTile.colInx]=e}SwapBack(){this.isSwapBack=!this.isSwapBack,this.isSwapBack&&this.gameInteractionStateSource.next(y.LocateAdjacentTile)}Shutter(t){t.grid[this.playerTile.tile.rowInx][this.playerTile.tile.colInx].animateShutter=!0}ApplyPotentials(t,e,i){if(t&&(null==e?void 0:e.length))if(i){const i=e[Math.floor(Math.random()*e.length)];this.applyPotentialClass(i,t)}else for(const a of e)this.applyPotentialClass(a,t)}applyPotentialClass(t,e){for(const i of t)e.grid[i.rowInx][i.colInx].potential=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(f))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var w=i("D0XW"),x=i("7o/Q"),_=i("EY2u"),k=i("LRne"),I=i("HDdC");let M=(()=>{class t{constructor(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)}toObservable(){switch(this.kind){case"N":return Object(k.a)(this.value);case"E":return t=this.error,new I.a(e=>e.error(t));case"C":return Object(_.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function T(t,e=w.a){var i;const a=(i=t)instanceof Date&&!isNaN(+i)?+t-e.now():Math.abs(t);return t=>t.lift(new C(a,e))}class C{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new O(t,this.delay,this.scheduler))}}class O extends x.a{constructor(t,e,i){super(t),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,i=e.queue,a=t.scheduler,n=t.destination;for(;i.length>0&&i[0].time-a.now()<=0;)i.shift().notification.observe(n);if(i.length>0){const e=Math.max(0,i[0].time-a.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(O.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,i=new R(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(M.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(M.createComplete()),this.unsubscribe()}}class R{constructor(t,e){this.time=t,this.notification=e}}var E=i("zx2A");function A(t){return e=>e.lift(new L(t))}class L{constructor(t){this.notifier=t}call(t,e){const i=new N(t),a=Object(E.c)(this.notifier,new E.a(i));return a&&!i.seenValue?(i.add(a),e.subscribe(i)):i}}class N extends E.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var P=function(t){return t[t.LockBoard=0]="LockBoard",t[t.FindMatches=1]="FindMatches",t[t.RemoveMatchSet=2]="RemoveMatchSet",t[t.ApplyScoring=3]="ApplyScoring",t[t.UnlockBoard=4]="UnlockBoard",t}({});let D=(()=>{class t{constructor(){this.gameLoopStateSource=new g.a,this.gameLoopState$=this.gameLoopStateSource.asObservable()}DoStep(t){this.gameLoopStateSource.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var j=function(t){return t[t.SetToRemove=0]="SetToRemove",t[t.NextTile=1]="NextTile",t[t.ApplyRemoveClass=2]="ApplyRemoveClass",t[t.ApplyDropClass=3]="ApplyDropClass",t[t.Shift=4]="Shift",t[t.Complete=5]="Complete",t}({});let z=(()=>{class t{constructor(){this.tileRemoveStateSource=new g.a,this.tilesToRemove=[],this.tileRemoveState$=this.tileRemoveStateSource.asObservable()}StartTileDeletion(t){this.tilesToRemove=t,this.tileRemoveStateSource.next(j.SetToRemove)}SetToRemove(t){this.tilesToRemove.forEach(e=>{t.grid[e.rowInx][e.colInx].toRemove=!0}),this.tileRemoveStateSource.next(j.NextTile)}NextTile(t){this.tilesToRemove.length?(this.currentTile=this.tilesToRemove.shift(),t.colInx=this.currentTile.colInx,this.newTile=t,this.tileRemoveStateSource.next(j.ApplyRemoveClass)):this.tileRemoveStateSource.next(j.Complete)}ApplyRemoveClass(t){t.grid[this.currentTile.rowInx][this.currentTile.colInx].animateRemove=!0,this.tileRemoveStateSource.next(j.ApplyDropClass)}ApplyDropClass(t){let e=this.currentTile.rowInx;for(;e>0;)e--,t.grid[e][this.currentTile.colInx].animateSlideDown=!0;this.tileRemoveStateSource.next(j.Shift)}Shift(t){let e=this.currentTile.rowInx;const i=this.currentTile.colInx;for(;e>0;){e--;const a=Object.assign({},t.grid[e][i]);a.rowInx=e+1,a.animateSlideDown=!1,t.grid[e+1][i]=a}t.grid[0][i]=this.newTile,this.tileRemoveStateSource.next(j.NextTile)}debugColumn(t,e){for(let i=0;i<e.grid.length;i++)console.log("    ",i,e.grid[i][t])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const B={list:[{level:1,title:"Fun Emojis!",emojis:[{code:"1F60E",title:"smiling face with sunglasses"},{code:"1F63A",title:"grinning cat"},{code:"1F43A",title:"wolf"},{code:"1F42C",title:"dolphin"},{code:"1F3E1",title:"house with garden"},{code:"1F9C7",title:"waffle"}]},{level:2,title:"Ground Transport",emojis:[{code:"1F694",title:"oncoming police car"},{code:"1F699",title:"sport utility vehicle"},{code:"1F68D",title:"oncoming bus"},{code:"26FD",title:"fuel pump"},{code:"1F6A7",title:"construction"},{code:"1F6A5",title:"horizontal traffic light"}]},{level:3,title:"Sky",emojis:[{code:"1F319",title:"crescent moon"},{code:"1F31E",title:"sun with face"},{code:"1F320",title:"shooting star"},{code:"1FA90",title:"ringed planet"},{code:"1F308",title:"rainbow"},{code:"1F30C",title:"milky way"}]}]};var U=function(t){return t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t}({});const F=[U.N,U.E,U.S,U.W],V=[U.N,U.NE,U.E,U.SE,U.S,U.SW,U.W,U.NW];let G=(()=>{class t{constructor(t){this.gameUtilityService=t,this.candidateMatches=new Array,this.matchSets=[],this.potentialMatchSets=[]}get currentMatchSets(){return this.matchSets}get currentPotentialMatches(){return this.potentialMatchSets}CreateGame(t,e,i){const a={grid:[]};for(let n=0;n<t;n++){a.grid[n]=new Array;for(let t=0;t<e;t++){const e=this.NewTile(n,t,i);a.grid[n][t]=e}}return a}NewTile(t,e,i){var a;const n=B.list.find(t=>t.level===i),r=null==n?void 0:n.emojis[Math.floor(Math.random()*(null===(a=null==n?void 0:n.emojis)||void 0===a?void 0:a.length))];return Object.assign({colInx:e,rowInx:t,html:`&#x${null==r?void 0:r.code};`,score:0},r)}ReIndexGrid(t){var e;null===(e=null==t?void 0:t.grid)||void 0===e||e.forEach((e,i)=>{e.forEach((e,a)=>{t.grid[i][a].colInx=a,t.grid[i][a].rowInx=i,t.grid[i][a].matched=!1,t.grid[i][a].potential=!1,t.grid[i][a].score=0,t.grid[i][a].animateSlideUp=!1,t.grid[i][a].animateSlideRight=!1,t.grid[i][a].animateSlideDown=!1,t.grid[i][a].animateSlideLeft=!1,t.grid[i][a].animateShutter=!1,t.grid[i][a].potential=!1})})}ApplyScoring(t,e,i){for(const a of e){const n=t.grid[a.rowInx][a.colInx].score*i;t.grid[a.rowInx][a.colInx].score=n?n*e.length:e.length}}TallyScore(t){let e=0;return null==t||t.grid.forEach(t=>t.forEach(t=>{e+=t.score})),e}FindMatchesAndPotentials(t){var e;this.candidateMatches=[],this.matchSets=[],this.potentialMatchSets=[],null===(e=null==t?void 0:t.grid)||void 0===e||e.forEach(e=>{e.forEach(e=>{F.forEach(i=>{this.candidateMatches=[Object.assign({},e)],this.directionalSearch(i,e,t),this.candidateMatches.length>=3&&(this.candidateMatches.forEach(e=>{t.grid[e.rowInx][e.colInx].matched=!0}),this.candidateMatches.every(t=>t.matched)||this.matchSets.push([...this.candidateMatches]))}),this.potentialSearchStaggered(e,t)})})}directionalSearch(t,e,i){let a=e.rowInx,n=e.colInx;switch(t){case U.N:a=e.rowInx-1;break;case U.E:n=e.colInx+1;break;case U.S:a=e.rowInx+1;break;case U.W:n=e.colInx-1}if(!this.gameUtilityService.WithinGrid(a,n,i))return;const r=i.grid[a][n];if(r.code===e.code)this.candidateMatches.push(Object.assign({},r)),this.directionalSearch(t,r,i);else if(2===this.candidateMatches.length)return this.potentialSearch(e,i),void this.potentialExtended(t,e,i)}potentialSearch(t,e){let i=0,a=0;for(const n of V){switch(n){case U.N:i=t.rowInx-1;break;case U.NE:i=t.rowInx-1,a=t.colInx+1;break;case U.E:a=t.colInx+1;break;case U.SE:i=t.rowInx+1,a=t.colInx+1;break;case U.S:i=t.rowInx+1;break;case U.SW:i=t.rowInx+1,a=t.colInx-1;break;case U.W:a=t.colInx-1;break;case U.NW:i=t.rowInx-1,a=t.colInx-1}if(this.gameUtilityService.WithinGrid(i,a,e)){const n=e.grid[i][a],r=this.candidateMatches[0];if(n&&n.rowInx!==r.rowInx&&n.colInx!==r.colInx&&n.code===t.code)return void this.potentialMatchSets.push([...this.candidateMatches,n])}}}potentialExtended(t,e,i){let a=e.rowInx,n=e.colInx;switch(t){case U.N:a=e.rowInx-2;break;case U.E:n=e.colInx+2;break;case U.S:a=e.rowInx+2;break;case U.W:n=e.colInx-2}if(this.gameUtilityService.WithinGrid(a,n,i)){const t=i.grid[a][n];this.candidateMatches.every(e=>e.code===t.code)&&this.potentialMatchSets.push([...this.candidateMatches,t])}}potentialSearchStaggered(t,e){var i;const a=new Array;let n=0,r=0;if(F.forEach(i=>{switch(n=t.rowInx,r=t.colInx,i){case U.N:n=t.rowInx-1;break;case U.E:r=t.colInx+1;break;case U.S:n=t.rowInx+1;break;case U.W:r=t.colInx-1}this.gameUtilityService.WithinGrid(n,r,e)&&a.push(e.grid[n][r])}),a.length>=3)for(let o=0;o<a.length;o++){const t=null===(i=a[o])||void 0===i?void 0:i.code,e=a.filter(e=>(null==e?void 0:e.code)===t);if(e.length>=3)return void this.potentialMatchSets.push(e)}}}return t.\u0275fac=function(e){return new(e||t)(r.Pb(f))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var W=i("8LU1"),X=i("quSY"),H=i("DH7j"),K=i("n6bG"),Z=i("lJxs");function q(t,e,i,a){return Object(K.a)(i)&&(a=i,i=void 0),a?q(t,e,i).pipe(Object(Z.a)(t=>Object(H.a)(t)?a(...t):a(t))):new I.a(a=>{J(t,e,function(t){a.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},a,i)})}function J(t,e,i,a,n){let r;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const a=t;t.addEventListener(e,i,n),r=()=>a.removeEventListener(e,i,n)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const a=t;t.on(e,i),r=()=>a.off(e,i)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const a=t;t.addListener(e,i),r=()=>a.removeListener(e,i)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let r=0,o=t.length;r<o;r++)J(t[r],e,i,a,n)}a.add(r)}var $=i("pLZG");const Y=["primaryValueBar"];class Q{constructor(t){this._elementRef=t}}const tt=Object(o.d)(Q,"primary"),et=new r.q("mat-progress-bar-location",{providedIn:"root",factory:function(){const t=Object(r.T)(a.c),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}});let it=0,at=(()=>{class t extends tt{constructor(t,e,i,a){super(t),this._elementRef=t,this._ngZone=e,this._animationMode=i,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new r.n,this._animationEndSubscription=X.a.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+it++;const n=a?a.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${n}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===i}get value(){return this._value}set value(t){this._value=nt(Object(W.c)(t)||0)}get bufferValue(){return this._bufferValue}set bufferValue(t){this._bufferValue=nt(t||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=this._primaryValueBar.nativeElement;this._animationEndSubscription=q(t,"transitionend").pipe(Object($.a)(e=>e.target===t)).subscribe(()=>{"determinate"!==this.mode&&"buffer"!==this.mode||this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(r.z),r.Ib(s.a,8),r.Ib(et,8))},t.\u0275cmp=r.Cb({type:t,selectors:[["mat-progress-bar"]],viewQuery:function(t,e){if(1&t&&r.jc(Y,!0),2&t){let t;r.ac(t=r.Tb())&&(e._primaryValueBar=t.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"mat-progress-bar"],hostVars:4,hostBindings:function(t,e){2&t&&(r.zb("aria-valuenow","indeterminate"===e.mode||"query"===e.mode?null:e.value)("mode",e.mode),r.Ab("_mat-animation-noopable",e._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[r.vb],decls:9,vars:4,consts:[["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(t,e){1&t&&(r.Vb(),r.Lb(0,"svg",0),r.Lb(1,"defs"),r.Lb(2,"pattern",1),r.Jb(3,"circle",2),r.Kb(),r.Kb(),r.Jb(4,"rect",3),r.Kb(),r.Ub(),r.Jb(5,"div",4),r.Jb(6,"div",5,6),r.Jb(8,"div",7)),2&t&&(r.yb(2),r.Zb("id",e.progressbarId),r.yb(2),r.zb("fill",e._rectangleFillValue),r.yb(1),r.Zb("ngStyle",e._bufferTransform()),r.yb(1),r.Zb("ngStyle",e._primaryTransform()))},directives:[a.j],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),t})();function nt(t,e=0,i=100){return Math.max(e,Math.min(i,t))}let rt=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[a.b,o.a],o.a]}),t})(),ot=(()=>{class t{constructor(t){this.gameInteractionsService=t}onSwipe(t){this.gameInteractionsService.TileSwiped({tile:this.tile,direction:null==t?void 0:t.direction})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(S))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-game-board-tile"]],inputs:{tile:"tile",disabled:"disabled"},decls:2,vars:23,consts:[[1,"game-tile",3,"swipe"],[1,"tile-overlay",3,"innerHTML"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Sb("swipe",function(t){return e.onSwipe(t)}),r.Jb(1,"div",1),r.Kb()),2&t&&(r.Ab("game-tile__disabled",e.disabled),r.yb(1),r.Ab("tile-overlay__disabled",e.disabled&&!(null!=e.tile&&e.tile.toRemove)&&!(null!=e.tile&&e.tile.animateRemove)&&!(null!=e.tile&&e.tile.animateSlideUp)&&!(null!=e.tile&&e.tile.animateSlideRight)&&!(null!=e.tile&&e.tile.animateSlideDown)&&!(null!=e.tile&&e.tile.animateSlideLeft))("tile-overlay__to-remove",null==e.tile?null:e.tile.toRemove)("tile-overlay__remove",null==e.tile?null:e.tile.animateRemove)("tile-overlay__slide-up",null==e.tile?null:e.tile.animateSlideUp)("tile-overlay__slide-right",null==e.tile?null:e.tile.animateSlideRight)("tile-overlay__slide-down",null==e.tile?null:e.tile.animateSlideDown)("tile-overlay__slide-left",null==e.tile?null:e.tile.animateSlideLeft)("tile-overlay__reset-slide",!(null!=e.tile&&e.tile.animateSlideDown||null!=e.tile&&e.tile.animateSlideUp||null!=e.tile&&e.tile.animateSlideRight||e.tile.animateSlideLeft))("tile-overlay__shutter",null==e.tile?null:e.tile.animateShutter)("tile-overlay__hint",null==e.tile?null:e.tile.potential),r.Zb("innerHTML",null==e.tile?null:e.tile.html,r.dc))},styles:[".game-tile[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:relative;height:1.5em;width:1.5em;font-size:4em;background-color:#ddd;border-radius:.25em;margin:.1em;display:flex;justify-content:center;align-items:center}.game-tile__disabled[_ngcontent-%COMP%]{pointer-events:none}.game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-down[_ngcontent-%COMP%], .game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-left[_ngcontent-%COMP%], .game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-right[_ngcontent-%COMP%], .game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-up[_ngcontent-%COMP%], .game-tile[_ngcontent-%COMP%]   .tile-slide[_ngcontent-%COMP%]{z-index:1;filter:blur(2px)}.game-tile[_ngcontent-%COMP%]   .tile-overlay[_ngcontent-%COMP%]{position:absolute;transition:transform 1s,font-size 1s,opacity 1s,margin-left .5s,margin-top .5s}.game-tile[_ngcontent-%COMP%]   .tile-overlay__disabled[_ngcontent-%COMP%]{filter:blur(2px) grayscale(50%)}.game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-down[_ngcontent-%COMP%]{margin-top:3.3em}.game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-up[_ngcontent-%COMP%]{margin-top:-3.3em}.game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-right[_ngcontent-%COMP%]{margin-left:3.3em}.game-tile[_ngcontent-%COMP%]   .tile-overlay__slide-left[_ngcontent-%COMP%]{margin-left:-3.3em}.game-tile[_ngcontent-%COMP%]   .tile-overlay__reset-slide[_ngcontent-%COMP%]{transition:transform 1s,font-size 1s,opacity 1s;margin-left:0;margin-top:0}.game-tile[_ngcontent-%COMP%]   .tile-overlay__to-remove[_ngcontent-%COMP%]{animation:wobble 1s infinite}.game-tile[_ngcontent-%COMP%]   .tile-overlay__remove[_ngcontent-%COMP%]{transform:rotate(-365deg);font-size:0;opacity:0}.game-tile[_ngcontent-%COMP%]   .tile-overlay__shutter[_ngcontent-%COMP%]{animation:shutter .25s 2}.game-tile[_ngcontent-%COMP%]   .tile-overlay__hint[_ngcontent-%COMP%]{animation:hint .5s}@keyframes wobble{0%{transform:rotate(10deg);font-size:90%}50%{transform:rotate(-10deg);font-size:120%}}@keyframes shutter{0%{margin-left:.5em;transform:skewX(5deg,5deg)}50%{margin-left:-.5em;transform:skew(-5deg,-5deg)}}@keyframes hint{to{font-size:500%;opacity:0}}@media (max-width:767px){.game-tile[_ngcontent-%COMP%]{height:1.75em;width:1.75em;margin:.05em;font-size:3.05em}}"]}),t})();function st(t,e){if(1&t&&r.Jb(0,"app-game-board-tile",5),2&t){const t=e.$implicit,i=r.Wb(2);r.Zb("tile",t)("disabled",i.boardDisabled)}}function lt(t,e){if(1&t&&(r.Lb(0,"div"),r.Lb(1,"div",3),r.gc(2,st,1,2,"app-game-board-tile",4),r.Kb(),r.Kb()),2&t){const t=e.$implicit;r.yb(2),r.Zb("ngForOf",t)}}let ct=(()=>{class t{constructor(t,e,i,a){this.gameService=t,this.gameLoopService=e,this.tileRemoveService=i,this.gameInteractionsService=a,this.boardDisabled=!1,this.score=0,this.level=1,this.matchSetCount=0,this.matchProgress=0,this.matchSets=[],this.currentMatchSet=[],this.potentialMatchSets=[],this.GAME_BOARD_ROWS=7,this.GAME_BOARD_COLUMNS=5,this.MATCH_SET_COUNT_NEXT_LEVEL=1,this.AUTHORED_LEVEL_COUNT=3,this.subscription=new g.a,this.swapInProgress=!1,this.scoreUpdated=new r.n,this.levelUpdated=new r.n}ngOnInit(){this.gameLoopService.gameLoopState$.pipe(T(50)).pipe(A(this.subscription)).subscribe(t=>{switch(t){case P.LockBoard:this.boardDisabled=!0,this.gameLoopService.DoStep(P.FindMatches);break;case P.FindMatches:this.gameService.FindMatchesAndPotentials(this.gameBoard),this.matchSets=this.gameService.currentMatchSets,this.potentialMatchSets=this.gameService.currentPotentialMatches,this.gameLoopService.DoStep(P.RemoveMatchSet);break;case P.RemoveMatchSet:this.matchSets.length?(this.currentMatchSet=this.matchSets.shift(),this.tileRemoveService.StartTileDeletion(this.currentMatchSet.map(t=>Object.assign({},t))),this.matchSetCount++,this.swapInProgress=!1):(this.swapInProgress&&(this.gameInteractionsService.DoStep(y.SwapBack),this.swapInProgress=!1),this.potentialMatchSets.length&&this.gameLoopService.DoStep(P.UnlockBoard));break;case P.ApplyScoring:this.gameService.ApplyScoring(this.gameBoard,this.currentMatchSet,this.level),this.score+=this.gameService.TallyScore(this.gameBoard),this.scoreUpdated.emit(this.score),this.matchProgress=this.matchSetCount/this.MATCH_SET_COUNT_NEXT_LEVEL*100,this.matchSetCount>=this.MATCH_SET_COUNT_NEXT_LEVEL?this.nextLevel():this.gameLoopService.DoStep(P.FindMatches);break;case P.UnlockBoard:this.boardDisabled=!1}}),this.tileRemoveService.tileRemoveState$.pipe(T(150)).pipe(A(this.subscription)).subscribe(t=>{switch(t){case j.SetToRemove:this.tileRemoveService.SetToRemove(this.gameBoard);break;case j.NextTile:this.gameService.ReIndexGrid(this.gameBoard),this.tileRemoveService.NextTile(this.gameService.NewTile(0,0,this.levelToRender()));break;case j.ApplyRemoveClass:this.tileRemoveService.ApplyRemoveClass(this.gameBoard);break;case j.ApplyDropClass:this.tileRemoveService.ApplyDropClass(this.gameBoard);break;case j.Shift:this.tileRemoveService.Shift(this.gameBoard);break;case j.Complete:this.gameLoopService.DoStep(P.ApplyScoring)}}),this.gameInteractionsService.gameInteractionState$.pipe(T(100)).pipe(A(this.subscription)).subscribe(t=>{switch(t){case y.LocateAdjacentTile:this.gameInteractionsService.LocateAdjacentTile(this.gameBoard)&&(this.swapInProgress=!0,this.gameInteractionsService.DoStep(y.ApplyDirectionalAnimation));break;case y.ApplyDirectionalAnimation:this.gameInteractionsService.SetDirectionalAnimationClass(this.gameBoard);break;case y.Swap:this.gameInteractionsService.Swap(this.gameBoard),this.gameService.ReIndexGrid(this.gameBoard),this.gameLoopService.DoStep(P.LockBoard);break;case y.SwapBack:this.gameInteractionsService.SwapBack();break;case y.Shutter:this.gameInteractionsService.Shutter(this.gameBoard);break;case y.ShowHint:this.gameInteractionsService.ApplyPotentials(this.gameBoard,this.potentialMatchSets,!0)}}),this.NewGame()}ngOnDestroy(){this.subscription.next(!0),this.subscription.complete()}NewGame(t=!1){t||(this.score=0,this.scoreUpdated.emit(this.score),this.level=1,this.levelUpdated.emit(this.level)),this.matchProgress=0,this.gameBoard=this.gameService.CreateGame(this.GAME_BOARD_ROWS,this.GAME_BOARD_COLUMNS,this.levelToRender()),this.gameLoopService.DoStep(P.LockBoard)}Hint(){this.gameInteractionsService.DoStep(y.ShowHint);const t=25*this.level;this.score-t>Number.MIN_SAFE_INTEGER&&(this.score-=t,this.scoreUpdated.emit(this.score))}nextLevel(){this.matchSetCount=0,this.level++,this.levelUpdated.emit(this.level),this.NewGame(!0)}levelToRender(){const t=this.level%this.AUTHORED_LEVEL_COUNT;return 0===t?3:t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(G),r.Ib(D),r.Ib(z),r.Ib(S))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-game-board"]],outputs:{scoreUpdated:"scoreUpdated",levelUpdated:"levelUpdated"},decls:3,vars:2,consts:[[1,"game-board"],[4,"ngFor","ngForOf"],["mode","determinate",3,"value"],[1,"grid-column"],[3,"tile","disabled",4,"ngFor","ngForOf"],[3,"tile","disabled"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.gc(1,lt,3,1,"div",1),r.Jb(2,"mat-progress-bar",2),r.Kb()),2&t&&(r.yb(1),r.Zb("ngForOf",e.gameBoard.grid),r.yb(1),r.Zb("value",e.matchProgress))},directives:[a.h,at,ot],styles:[".game-board[_ngcontent-%COMP%]{display:inline-block;position:relative;overflow:hidden}.game-board[_ngcontent-%COMP%]   .grid-column[_ngcontent-%COMP%]{display:flex}"]}),t})();const mt=[{path:"",component:(()=>{class t{constructor(){this.score=0,this.level=1}ngOnInit(){}updateScore(t){this.score=t}updateLevel(t){this.level=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-game-container"]],decls:13,vars:4,consts:[[1,"game-container"],[1,"game-header"],[1,"game-controls"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"game-board",3,"scoreUpdated","levelUpdated"],["gameBoard",""]],template:function(t,e){if(1&t){const t=r.Mb();r.Lb(0,"div",0),r.Lb(1,"div",1),r.Lb(2,"h2"),r.hc(3),r.Kb(),r.Lb(4,"h2"),r.hc(5),r.Kb(),r.Lb(6,"div",2),r.Lb(7,"button",3),r.Sb("click",function(){return r.cc(t),r.bc(12).Hint()}),r.hc(8," Hint "),r.Kb(),r.Lb(9,"button",3),r.Sb("click",function(){return r.cc(t),r.bc(12).NewGame()}),r.hc(10," New Game "),r.Kb(),r.Kb(),r.Kb(),r.Lb(11,"app-game-board",4,5),r.Sb("scoreUpdated",function(t){return e.updateScore(t)})("levelUpdated",function(t){return e.updateLevel(t)}),r.Kb(),r.Kb()}if(2&t){const t=r.bc(12);r.yb(3),r.ic("Level ",e.level,""),r.yb(2),r.ic("Score: ",e.score,""),r.yb(2),r.Zb("disabled",t.boardDisabled),r.yb(2),r.Zb("disabled",t.boardDisabled)}},directives:[h,ct],styles:[".game-container[_ngcontent-%COMP%]   .game-header[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}.game-container[_ngcontent-%COMP%]   .game-header[_ngcontent-%COMP%]   .game-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.5em}"]}),t})()}];let dt=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[a.b,n.a.forChild(mt)]]}),t})(),bt=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[a.b,dt,p,rt]]}),t})()}}]);